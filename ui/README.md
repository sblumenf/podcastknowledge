# UI Module

## Overview
This is the UI module for the Podcast Knowledge application. It provides a web interface for exploring the knowledge graphs stored in Neo4j databases by the seeding pipeline. This module is completely independent from the transcriber and seeding pipeline modules.

## Module Independence
- **Read-only**: This module only reads data from Neo4j databases, never writes
- **No shared code**: No imports from transcriber or seeding_pipeline modules
- **Database as interface**: Neo4j is the only connection point between modules
- **Deletable**: This entire module can be removed without affecting data collection or processing

## Purpose
The UI module serves as a viewer for the podcast knowledge graphs. It reads the configuration from the seeding pipeline to understand which podcasts exist and connects to their respective Neo4j instances to display data.

## Architecture
```
ui/
├── backend/              # FastAPI server (Python)
│   ├── main.py          # API entry point
│   ├── config.py        # Configuration reader
│   ├── routes/          # API endpoints
│   │   ├── __init__.py
│   │   └── welcome.py   # Welcome endpoint
│   └── requirements.txt # Python dependencies
├── frontend/            # React application (TypeScript)
│   ├── src/
│   │   ├── components/  # React components
│   │   ├── services/    # API service layer
│   │   ├── App.tsx      # Main app component
│   │   └── main.tsx     # Entry point
│   ├── package.json     # Node dependencies
│   └── vite.config.ts   # Vite configuration
├── dev.sh              # Unix/Linux/Mac development script
└── dev.bat             # Windows development script
```

## Setup Instructions

### Prerequisites
- Python 3.8 or higher
- Node.js 16 or higher
- npm or yarn
- Access to the seeding pipeline configuration file

### Quick Start

#### Unix/Linux/Mac
```bash
cd ui
./dev.sh
```

#### Windows
```cmd
cd ui
dev.bat
```

The development script will:
1. Check that required ports (8001, 5173) are available
2. Create and activate a Python virtual environment
3. Install all backend dependencies
4. Install all frontend dependencies
5. Start both backend and frontend servers

### Manual Setup

If you prefer to set up manually or the scripts don't work:

#### Backend Setup
```bash
cd ui/backend
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
python main.py
```

The backend will start on http://localhost:8001

#### Frontend Setup
```bash
cd ui/frontend
npm install
npm run dev
```

The frontend will start on http://localhost:5173

## Development

### Backend Development
- **Framework**: FastAPI with Python
- **Port**: 8001
- **API Documentation**: http://localhost:8001/docs (auto-generated by FastAPI)
- **Hot Reload**: Enabled by default with uvicorn

To add a new API endpoint:
1. Create a new file in `backend/routes/`
2. Define your router and endpoints
3. Import and include the router in `main.py`

### Frontend Development
- **Framework**: React with TypeScript
- **Build Tool**: Vite
- **Port**: 5173
- **Hot Module Replacement**: Enabled by default

To add a new feature:
1. Create components in `frontend/src/components/`
2. Add API calls to `frontend/src/services/api.ts`
3. Use React hooks for state management

### Code Style
- Backend: Follow PEP 8 for Python code
- Frontend: TypeScript with functional React components
- Use meaningful variable names and add comments for complex logic

## Current Status
- ✅ Welcome page displaying the number of available podcasts
- ✅ Basic API structure with CORS configured
- ✅ Frontend-backend communication established
- ✅ Development scripts for easy startup

## Future Features (Planned)

### User Authentication
- Add auth middleware to FastAPI backend
- Implement login/logout components
- Secure API endpoints as needed

### Graph Visualization
- Integrate a graph visualization library (e.g., vis.js, d3.js)
- Create graph components in `frontend/src/components/graph/`
- Add graph data endpoints to backend

### Podcast Browsing
- Create podcast list and detail components
- Add pagination and filtering
- Implement search functionality

### RAG-powered Chat
- Add chat interface components
- Create chat endpoints in backend
- Integrate with LLM for knowledge retrieval

## Troubleshooting

### Port Already in Use
If you see "Port 8001/5173 is already in use":
```bash
# Find process using the port
lsof -i :8001  # or :5173

# Kill the process
kill -9 <PID>
```

### Module Not Found Errors
Make sure you're in the virtual environment:
```bash
cd backend
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

### CORS Errors
The backend is configured to accept requests from http://localhost:5173. If you're running the frontend on a different port, update the CORS settings in `backend/main.py`.

### Cannot Read Podcast Configuration
The backend expects to find the podcast configuration at `../../seeding_pipeline/config/podcasts.yaml`. Ensure this file exists and is readable.

### Dependencies Not Installing
Try clearing the cache and reinstalling:
```bash
# Backend
rm -rf backend/venv
cd backend && python3 -m venv venv

# Frontend
rm -rf frontend/node_modules frontend/package-lock.json
cd frontend && npm install
```

## Contributing
When adding new features:
1. Maintain module independence - no imports from other modules
2. Keep the UI read-only - don't modify Neo4j data
3. Follow the existing code structure and style
4. Update this README with any new setup requirements
5. Test both backend and frontend before committing

## Security Notes
- The current implementation has no authentication
- CORS is configured for local development only
- For production, update security settings in both backend and frontend
- Never commit sensitive data or API keys